# Java Stream API ì„±ëŠ¥ ê°œì„  ì‚¬ë¡€ ë°œí‘œ

## ğŸ“Œ ê°œìš”
Java Stream APIë¥¼ í™œìš©í•œ ì½”ë“œì˜ ì„±ëŠ¥ì„ ì¸¡ì •í•˜ê³  ê°œì„ í•œ 3ê°€ì§€ ì‚¬ë¡€ë¥¼ ì†Œê°œí•©ë‹ˆë‹¤.

ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼ ì˜ˆì œë¥¼ ê³µë¶€í•˜ë‹¤ê°€ **"ì™œ ì–´ë–¤ ì½”ë“œëŠ” forEachë¥¼, ì–´ë–¤ ì½”ë“œëŠ” collectë¥¼ ì‚¬ìš©í• ê¹Œ?"** ë¼ëŠ” ì˜ë¬¸ì—ì„œ ì‹œì‘ëœ ì—°êµ¬ì…ë‹ˆë‹¤.

---

## ğŸ¯ ì‚¬ë¡€ 1: ParallelStreamì—ì„œ ê²°ê³¼ë¥¼ ì˜¬ë°”ë¥´ê²Œ ìˆ˜ì§‘í•˜ê¸°

### ğŸ“‚ íŒŒì¼: `StreamAPI4.java`

### ğŸ¤” ì˜ë¬¸ì˜ ì‹œì‘

ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼ ì˜ˆì œë¥¼ ê³µë¶€í•˜ë˜ ì¤‘, ë‘ ê°€ì§€ ë‹¤ë¥¸ íŒ¨í„´ì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤:

**íŒ¨í„´ 1: ì‘ì€ ë°ì´í„° + forEach**
```java
// ì‘ì€ ë°ì´í„°ì…‹ (5ê°œ)
numbers.parallelStream()
    .map(n -> n * n)
    .forEach(System.out::println);  // ğŸ‘ˆ forEach ì‚¬ìš©
```

**íŒ¨í„´ 2: í° ë°ì´í„° + collect**
```java
// í° ë°ì´í„°ì…‹ (1,000,000ê°œ)
List<Integer> squaredNumbers = numbers.parallelStream()
    .map(n -> n * n)
    .collect(Collectors.toList());  // ğŸ‘ˆ collect ì‚¬ìš©
```

### ğŸ’¡ forEach vs collectì˜ ì°¨ì´

| êµ¬ë¶„ | forEach | collect |
|------|---------|---------|
| **ìš©ë„** | ë¶€ìˆ˜ íš¨ê³¼ ì‹¤í–‰ (ì¶œë ¥, ë¡œê¹…) | ê²°ê³¼ ìˆ˜ì§‘ (ë¦¬ìŠ¤íŠ¸, ì…‹, ë§µ) |
| **ë°˜í™˜ê°’** | void (ì—†ìŒ) | ì»¬ë ‰ì…˜ |
| **ì˜ˆì‹œ** | `forEach(System.out::println)` | `collect(Collectors.toList())` |
| **ë³‘ë ¬ ì²˜ë¦¬** | ìˆœì„œ ë³´ì¥ ì•ˆ ë¨ | Thread-Safeí•˜ê²Œ ìˆ˜ì§‘ |

### âœ… forEachì˜ ì˜¬ë°”ë¥¸ ì‚¬ìš©

```java
// âœ… ì¶œë ¥í•˜ê¸°
list.forEach(System.out::println);

// âœ… ë¡œê¹…í•˜ê¸°
list.forEach(item -> logger.info("Processing: " + item));

// âœ… ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥
list.forEach(item -> database.save(item));
```

**í•µì‹¬**: forEachëŠ” **"ê° ìš”ì†Œë¡œ ë­”ê°€ ì‹¤í–‰"**í•  ë•Œ ì‚¬ìš©í•˜ë©°, ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

### âŒ forEachì˜ ì˜ëª»ëœ ì‚¬ìš©

```java
// âŒ ê²°ê³¼ë¥¼ ìˆ˜ì§‘í•˜ë ¤ê³  ì‹œë„ (ì´ê±´ collectë¥¼ ì¨ì•¼ í•¨!)
numbers.parallelStream()
    .map(n -> n * n)
    .forEach(result -> {
        // ê²°ê³¼ê°€ ì–´ë””ë¡œ ê°”ì„ê¹Œìš”? ğŸ˜¢
    });
```

**ë¬¸ì œì **: ê²°ê³¼ë¥¼ ìˆ˜ì§‘í•˜ì§€ ëª»í•˜ê³  ë²„ë ¤ì§‘ë‹ˆë‹¤!

### âœ… collectë¥¼ ì‚¬ìš©í•œ ì˜¬ë°”ë¥¸ ê²°ê³¼ ìˆ˜ì§‘

```java
// âœ… ê²°ê³¼ë¥¼ ì œëŒ€ë¡œ ìˆ˜ì§‘
List<Integer> squaredNumbers = numbers.parallelStream()
    .map(n -> n * n)
    .collect(Collectors.toList());
```

**ì¥ì **:
- ë³‘ë ¬ ì²˜ë¦¬ ê²°ê³¼ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ìˆ˜ì§‘
- ë‚´ë¶€ì ìœ¼ë¡œ ìµœì í™”ëœ ë¦¬ë“€ì‹± ì „ëµ ì‚¬ìš©
- Thread-Safeí•˜ê²Œ ê²°ê³¼ë¥¼ ë³‘í•©

### ğŸ“Š í•µì‹¬ ì •ë¦¬

**ê²°ê³¼ë¥¼ ìˆ˜ì§‘í•˜ë ¤ë©´:**
- âœ… `collect(Collectors.toList())` ì‚¬ìš©
- âŒ `forEach`ë¡œ ì™¸ë¶€ ì»¬ë ‰ì…˜ì— ì¶”ê°€í•˜ì§€ ë§ ê²ƒ

**forEachëŠ” ì´ëŸ´ ë•Œ ì‚¬ìš©:**
- ì¶œë ¥, ë¡œê¹…, ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ ë“± **ê²°ê³¼ë¥¼ ìˆ˜ì§‘í•˜ì§€ ì•ŠëŠ”** ì‘ì—…

---

## ğŸ¯ ì‚¬ë¡€ 2: ParallelStreamì—ì„œ Thread-Safe ì»¬ë ‰ì…˜ ì‚¬ìš©

### ğŸ“‚ íŒŒì¼: `StreamAPI3.java`

### âŒ ìœ„í—˜í•œ ì½”ë“œ

```java
List<Integer> results = new ArrayList<>();
numbers.parallelStream().forEach(number -> {
    results.add(number * 2);  // âš ï¸ Thread-Safe í•˜ì§€ ì•ŠìŒ!
});
```

### ğŸš¨ ì™œ ìœ„í—˜í•œê°€?

1. **ArrayListì˜ ë¬¸ì œì **
   - ë©€í‹° ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ë™ì‹œì— `add()` í˜¸ì¶œ ì‹œ **Race Condition** ë°œìƒ
   - ë°ì´í„° ì†ì‹¤ ë˜ëŠ” `ArrayIndexOutOfBoundsException` ë°œìƒ ê°€ëŠ¥
   - ì˜ˆìƒì¹˜ ëª»í•œ ê²°ê³¼ ë°œìƒ

```java
// ì‹¤ì œ í…ŒìŠ¤íŠ¸ ê²°ê³¼
List<Integer> results = new ArrayList<>();
IntStream.range(0, 1000).parallel()
    .forEach(i -> results.add(i));

System.out.println("ì˜ˆìƒ: 1000, ì‹¤ì œ: " + results.size());
// ì¶œë ¥: 897ê°œ? 912ê°œ? â†’ Race Conditionìœ¼ë¡œ ë°ì´í„° ì†ì‹¤!
```

### âœ… í•´ê²° ë°©ë²• 1: Thread-Safe ì»¬ë ‰ì…˜ ì‚¬ìš©

```java
List<Integer> results2 = new CopyOnWriteArrayList<>();
numbers.parallelStream().forEach(number -> {
    results2.add(number * 2);  // âœ… Thread-Safe!
});
```

**CopyOnWriteArrayListì˜ ì¥ì **:
- ì“°ê¸° ì‘ì—… ì‹œ ë‚´ë¶€ ë°°ì—´ì„ ë³µì‚¬í•˜ì—¬ Thread-Safe ë³´ì¥
- ì½ê¸° ì‘ì—…ì€ ë½ ì—†ì´ ìˆ˜í–‰ ê°€ëŠ¥
- ë³‘ë ¬ ì²˜ë¦¬ í™˜ê²½ì—ì„œ ì•ˆì „í•˜ê²Œ ì‚¬ìš© ê°€ëŠ¥

### âœ… í•´ê²° ë°©ë²• 2: collect ì‚¬ìš© (ë” ì¶”ì²œ!)

```java
List<Integer> results = numbers.parallelStream()
    .map(number -> number * 2)
    .collect(Collectors.toList());  // âœ… ê°€ì¥ ì¢‹ì€ ë°©ë²•!
```

### ğŸ“Š ì„±ëŠ¥ ë¹„êµ ê²°ê³¼

```
[ArrayList + forEach] ì‹¤í–‰ì‹œê°„: 2,992,700 ns (+ Race Condition ë°œìƒ!)
[CopyOnWriteArrayList + forEach] ì‹¤í–‰ì‹œê°„: 804,000 ns
[collect()] ì‹¤í–‰ì‹œê°„: ìµœì í™”ë¨ + ì•ˆì „í•¨
```

### âš ï¸ ì£¼ì˜ì‚¬í•­

- `CopyOnWriteArrayList`ëŠ” ì“°ê¸°ê°€ ì ê³  ì½ê¸°ê°€ ë§ì„ ë•Œ ìœ ë¦¬
- **Best Practice**: `collect(Collectors.toList())` ì‚¬ìš© ê¶Œì¥!

---

## ğŸ¯ ì‚¬ë¡€ 3: Stream ì²´ì´ë‹ ìµœì í™”

### ğŸ“‚ íŒŒì¼: `OverusingTest.java`

### âŒ ë¹„íš¨ìœ¨ì ì¸ ì½”ë“œ (test1)

```java
List<String> result = names.stream()
    .filter(name -> name.startsWith("A"))      // ì²« ë²ˆì§¸ í•„í„°
    .filter(name -> name.length() > 3)         // ë‘ ë²ˆì§¸ í•„í„°
    .map(String::toUpperCase)                  // ì²« ë²ˆì§¸ ë³€í™˜
    .map(name -> name + " is a name")          // ë‘ ë²ˆì§¸ ë³€í™˜
    .toList();
```

### âœ… ê°œì„ ëœ ì½”ë“œ (test2)

```java
List<String> result = names.stream()
    .filter(name -> name.startsWith("A") && name.length() > 3)  // í•„í„° í†µí•©
    .map(name -> name.toUpperCase() + " is a name")             // ë³€í™˜ í†µí•©
    .toList();
```

### ğŸ’¡ ì™œ ê°œì„ ë˜ì—ˆë‚˜?

#### 1. ì²´ì´ë‹ì´ ë§ì„ ë•Œì˜ ë¬¸ì œì 

```
ë°ì´í„°: ["Alice", "Bob", "Andrew", "Amy", "Al"]

ë¹„íš¨ìœ¨ì ì¸ ë°©ì‹:
Alice â†’ filter(startsWith "A") â†’ âœ…
     â†’ filter(length > 3) â†’ âœ…
     â†’ map(toUpperCase) â†’ "ALICE"
     â†’ map(+ " is a name") â†’ "ALICE is a name"

ì´ 4ë²ˆì˜ ì—°ì‚° ê³¼ì •ì„ ê±°ì¹¨!
```

- ê° ì¤‘ê°„ ì—°ì‚°ë§ˆë‹¤ ë‚´ë¶€ì ìœ¼ë¡œ ìƒˆë¡œìš´ ìŠ¤íŠ¸ë¦¼ íŒŒì´í”„ë¼ì¸ ìƒì„±
- ë¶ˆí•„ìš”í•œ ëŒë‹¤ í˜¸ì¶œ ì¦ê°€
- ë°ì´í„°ê°€ ì—¬ëŸ¬ ë‹¨ê³„ë¥¼ ê±°ì¹˜ë©° ì˜¤ë²„í—¤ë“œ ë°œìƒ

#### 2. í†µí•©ì˜ ì¥ì 

```
íš¨ìœ¨ì ì¸ ë°©ì‹:
Alice â†’ filter(startsWith "A" && length > 3) â†’ âœ…
     â†’ map(toUpperCase + " is a name") â†’ "ALICE is a name"

ì´ 2ë²ˆì˜ ì—°ì‚° ê³¼ì •ìœ¼ë¡œ ë‹¨ì¶•!
```

- **í•„í„° í†µí•©**: ì¡°ê±´ ê²€ì‚¬ë¥¼ í•œ ë²ˆì— ìˆ˜í–‰
- **ë§µ í†µí•©**: ë³€í™˜ ì‘ì—…ì„ í•œ ë²ˆì— ì²˜ë¦¬
- ì¤‘ê°„ ì—°ì‚° íšŸìˆ˜ ê°ì†Œë¡œ ì„±ëŠ¥ í–¥ìƒ

### ğŸ“Š ì„±ëŠ¥ ë¹„êµ ê²°ê³¼

```
[test1 - ì²´ì´ë‹ ë§ìŒ]
ê²°ê³¼: [ALICE is a name]
ê±¸ë¦° ì‹œê°„(ë‚˜ë…¸ì´ˆ): 17,741,400 ns

[test2 - ì²´ì´ë‹ ìµœì í™”]
ê²°ê³¼: [ALICE is a name]
ê±¸ë¦° ì‹œê°„(ë‚˜ë…¸ì´ˆ): 1,140,400 ns

â†’ ì•½ 15ë°° ì´ìƒ ë¹ ë¦„! ğŸš€
```

### ğŸ’¡ ìµœì í™” íŒ

```java
// âŒ ë‚˜ìœ ì˜ˆ
stream
    .filter(x -> x > 0)
    .filter(x -> x < 100)
    .filter(x -> x % 2 == 0)
    .map(x -> x * 2)
    .map(x -> x + 1)

// âœ… ì¢‹ì€ ì˜ˆ
stream
    .filter(x -> x > 0 && x < 100 && x % 2 == 0)
    .map(x -> x * 2 + 1)
```

---

## ğŸ“‹ ë³‘ë ¬ ì²˜ë¦¬ì˜ ìŠ¤ì¼€ì¼ë§ íš¨ê³¼

### ğŸ“‚ íŒŒì¼: `case03_compare.java`

ì´ ì½”ë“œëŠ” **ì‘ì€ ë°ì´í„°ì…‹**ê³¼ **í° ë°ì´í„°ì…‹**ì—ì„œ ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼ì˜ ì„±ëŠ¥ì„ ë¹„êµí•©ë‹ˆë‹¤.

### ğŸ”¬ ì‹¤í—˜ ì½”ë“œ

#### â‘  ì‘ì€ ë°ì´í„°ì…‹ (5ê°œ) - ë¹„íš¨ìœ¨ì ì¸ ì˜ˆì‹œ

```java
List<Integer> smallNumbers = Arrays.asList(1, 2, 3, 4, 5);
long startTime1 = System.nanoTime();

smallNumbers.parallelStream()
    .map(n -> {
        System.out.println(
            Thread.currentThread().getName() + " processing: " + n
        );
        return n * n;
    })
    .forEach(System.out::println);

long endTime1 = System.nanoTime();
System.out.println("[ë¹„íš¨ìœ¨ ì½”ë“œ ì‹¤í–‰ ì‹œê°„(ns)] : " + (endTime1 - startTime1));
```

**ì‹¤í–‰ ê²°ê³¼ ì˜ˆì‹œ**:
```
ForkJoinPool.commonPool-worker-1 processing: 2
ForkJoinPool.commonPool-worker-2 processing: 3
main processing: 1
... (ìŠ¤ë ˆë“œê°€ ê²½ìŸí•˜ë©° ì¶œë ¥)
[ë¹„íš¨ìœ¨ ì½”ë“œ ì‹¤í–‰ ì‹œê°„(ns)] : 37,534,500 (ë§¤ìš° ëŠë¦¼!)
```

#### â‘¡ í° ë°ì´í„°ì…‹ (1,000,000ê°œ) - íš¨ìœ¨ì ì¸ ì˜ˆì‹œ

```java
List<Integer> largeNumbers = IntStream.rangeClosed(1, 1_000_000)
    .boxed()
    .collect(Collectors.toList());

long startTime2 = System.nanoTime();

List<Integer> squaredNumbers = largeNumbers.parallelStream()
    .map(n -> n * n)
    .collect(Collectors.toList());

long endTime2 = System.nanoTime();
System.out.println("First 10 squared numbers: " + squaredNumbers.subList(0, 10));
System.out.println("[ê°œì„  ì½”ë“œ ì‹¤í–‰ ì‹œê°„(ns)] : " + (endTime2 - startTime2));
```

**ì‹¤í–‰ ê²°ê³¼**:
```
First 10 squared numbers: [1, 4, 9, 16, 25, 36, 49, 64, 81, 100]
[ê°œì„  ì½”ë“œ ì‹¤í–‰ ì‹œê°„(ns)] : 99,108,600
```

### ğŸ’¡ í•µì‹¬ ë°œê²¬: ë³‘ë ¬ ì²˜ë¦¬ì˜ ìŠ¤ì¼€ì¼ë§ íš¨ê³¼

#### 1ï¸âƒ£ ì‘ì€ ë°ì´í„°ì…‹ì—ì„œ parallelStream + println

**ë¬¸ì œì **:
- ë°ì´í„°ê°€ 5ê°œë°–ì— ì—†ëŠ”ë° ì—¬ëŸ¬ ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•˜ëŠ” ì˜¤ë²„í—¤ë“œ
- `System.out.println()`ì€ ë‚´ë¶€ì ìœ¼ë¡œ **synchronized** ì²˜ë¦¬ë¨
- ê° ìŠ¤ë ˆë“œê°€ ì¶œë ¥ì„ ìœ„í•´ ë½(lock)ì„ ê¸°ë‹¤ë¦¬ë©° ëŒ€ê¸°
- **ë³‘ë ¬ ì²˜ë¦¬ì˜ ì´ì  < ìŠ¤ë ˆë“œ ê´€ë¦¬ ë¹„ìš©**

```
ìŠ¤ë ˆë“œ ìƒì„± ë¹„ìš©: 10,000 ns
ë½ ëŒ€ê¸° ì‹œê°„: 5,000 ns Ã— 5ê°œ = 25,000 ns
ì‹¤ì œ ì‘ì—…: 100 ns Ã— 5ê°œ = 500 ns
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ì´ ì‹œê°„: 35,500 ns (ë¹„íš¨ìœ¨!)
```

#### 2ï¸âƒ£ í° ë°ì´í„°ì…‹ì—ì„œ parallelStream + collect

**ì¥ì **:
- **ë°ì´í„°ê°€ ì»¤ì§ˆìˆ˜ë¡ ë³‘ë ¬ ì²˜ë¦¬ì˜ ì§„ê°€ ë°œíœ˜!**
- 1,000,000ê°œì˜ ë°ì´í„°ë¥¼ ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ë¶„ë‹´í•˜ì—¬ ì²˜ë¦¬
- `collect()`ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ íš¨ìœ¨ì ì¸ ë³‘í•© ì „ëµ ì‚¬ìš©
- **ì¤‘ìš”**: ë°ì´í„°ê°€ 100ë§Œ ê°œë¡œ ëŠ˜ì–´ë‚˜ë„ ì‹¤í–‰ ì‹œê°„ì´ 100ë§Œ ë°° ëŠ˜ì§€ ì•ŠìŒ!

**ìŠ¤ì¼€ì¼ë§ íš¨ê³¼**:
```
ë°ì´í„° 5ê°œ â†’ ì‹œê°„ 35,000,000 ns (ë¹„íš¨ìœ¨)
ë°ì´í„° 1,000,000ê°œ â†’ ì‹œê°„ 99,000,000 ns (íš¨ìœ¨ì !)

ë§Œì•½ ìˆœì°¨ ì²˜ë¦¬ì˜€ë‹¤ë©´: ì•½ 500,000,000 ns ì˜ˆìƒ
â†’ ë³‘ë ¬ ì²˜ë¦¬ë¡œ ì•½ 5ë°° ë¹ ë¦„!
```

### ğŸ¯ ì™œ ì‹œê°„ì´ ì„ í˜•ì ìœ¼ë¡œ ëŠ˜ì–´ë‚˜ì§€ ì•ŠëŠ”ê°€?

#### 1. ë³‘ë ¬ ì²˜ë¦¬ì˜ ì‘ì—… ë¶„í• 

```
ì „ì²´ ë°ì´í„° 1,000,000ê°œë¥¼ 8ê°œ ì½”ì–´ê°€ ë‚˜ëˆ„ì–´ ì²˜ë¦¬
â†’ ê° ì½”ì–´ëŠ” ì•½ 125,000ê°œì”©ë§Œ ì²˜ë¦¬
â†’ ì´ë¡ ì ìœ¼ë¡œ 8ë°° ë¹ ë¦„ (ì‹¤ì œë¡œëŠ” ì˜¤ë²„í—¤ë“œë¡œ 5-6ë°° ì •ë„)
```

#### 2. íš¨ìœ¨ì ì¸ collect() ì—°ì‚°

```java
// ë‚´ë¶€ ë™ì‘ ì›ë¦¬ (ê°œë…ì ìœ¼ë¡œ)
Thread 1: [1...125,000] ì²˜ë¦¬ â†’ ë¶€ë¶„ ê²°ê³¼ 1
Thread 2: [125,001...250,000] ì²˜ë¦¬ â†’ ë¶€ë¶„ ê²°ê³¼ 2
...
Thread 8: [875,001...1,000,000] ì²˜ë¦¬ â†’ ë¶€ë¶„ ê²°ê³¼ 8

// ìµœì¢… ë³‘í•©
ë¶€ë¶„ ê²°ê³¼ 1 + ë¶€ë¶„ ê²°ê³¼ 2 + ... + ë¶€ë¶„ ê²°ê³¼ 8 â†’ ìµœì¢… ê²°ê³¼
```

- ê° ìŠ¤ë ˆë“œê°€ ë…ë¦½ì ìœ¼ë¡œ ë¶€ë¶„ ê²°ê³¼ë¥¼ ìƒì„±
- ìµœì¢… ë‹¨ê³„ì—ì„œë§Œ ë³‘í•© ìˆ˜í–‰
- Thread-Safeí•œ ë°©ì‹ìœ¼ë¡œ ê²°ê³¼ ìˆ˜ì§‘

#### 3. CPU ìºì‹œ í™œìš©

- ëŒ€ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì‹œ CPU ìºì‹œ íš¨ìœ¨ ì¦ê°€
- ì˜ˆì¸¡ ê°€ëŠ¥í•œ ë©”ëª¨ë¦¬ ì ‘ê·¼ íŒ¨í„´
- íŒŒì´í”„ë¼ì¸ ìµœì í™”

### ğŸ“Š ì‹¤í—˜ ì¡°ê±´ ì •ë¦¬

| êµ¬ë¶„ | ë°ì´í„° í¬ê¸° | ì—°ì‚° | íŠ¹ì§• | ì‹¤í–‰ ì‹œê°„ |
|------|------------|------|------|-----------|
| **ë¹„íš¨ìœ¨ì  ì½”ë“œ** | 5ê°œ | parallelStream + println | ìŠ¤ë ˆë“œ ì˜¤ë²„í—¤ë“œ > ì„±ëŠ¥ í–¥ìƒ | 37,534,500 ns |
| **ê°œì„  ì½”ë“œ** | 1,000,000ê°œ | parallelStream + collect | ë³‘ë ¬ ì²˜ë¦¬ì˜ ì´ì  ê·¹ëŒ€í™” | 99,108,600 ns |

---

## âœ¨ ê²°ë¡  ë° Best Practices

### ğŸ“Œ í•µì‹¬ ìš”ì•½

#### 1ï¸âƒ£ forEach vs collect

```java
// âŒ ì˜ëª»ëœ ì‚¬ìš©
parallelStream().forEach(item -> results.add(item));

// âœ… ì˜¬ë°”ë¥¸ ì‚¬ìš©
List<T> results = parallelStream()
    .collect(Collectors.toList());
```

**ì›ì¹™**:
- **ê²°ê³¼ë¥¼ ìˆ˜ì§‘**í•  ë•ŒëŠ” `collect()` ì‚¬ìš©
- **ë¶€ìˆ˜ íš¨ê³¼** (ì¶œë ¥, ë¡œê¹…)ëŠ” `forEach()` ì‚¬ìš©

#### 2ï¸âƒ£ Thread-Safety

```java
// âŒ ìœ„í—˜
List<Integer> results = new ArrayList<>();
parallelStream().forEach(results::add);

// âœ… ì•ˆì „ (ë°©ë²• 1)
List<Integer> results = new CopyOnWriteArrayList<>();
parallelStream().forEach(results::add);

// âœ… ì•ˆì „ (ë°©ë²• 2 - ë” ì¶”ì²œ!)
List<Integer> results = parallelStream()
    .collect(Collectors.toList());
```

**ì›ì¹™**:
- ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼ì—ì„œëŠ” Thread-Safe ì»¬ë ‰ì…˜ ì‚¬ìš©
- ê°€ëŠ¥í•˜ë©´ `collect()`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•ˆì „í•˜ê²Œ ìˆ˜ì§‘

#### 3ï¸âƒ£ Stream ì²´ì´ë‹ ìµœì í™”

```java
// âŒ ë¹„íš¨ìœ¨
stream
    .filter(ì¡°ê±´1)
    .filter(ì¡°ê±´2)
    .map(ë³€í™˜1)
    .map(ë³€í™˜2)

// âœ… íš¨ìœ¨
stream
    .filter(ì¡°ê±´1 && ì¡°ê±´2)
    .map(ë³€í™˜1ê³¼2ë¥¼_í•©ì¹¨)
```

**ì›ì¹™**:
- ê°€ëŠ¥í•œ í•œ ì¤‘ê°„ ì—°ì‚°ì„ í†µí•©
- í•„í„° ì¡°ê±´ì€ `&&`ë¡œ ê²°í•©
- ë§µ ë³€í™˜ì€ í•˜ë‚˜ì˜ ëŒë‹¤ë¡œ ì²˜ë¦¬

#### 4ï¸âƒ£ ë³‘ë ¬ ì²˜ë¦¬ ì‚¬ìš© ì‹œê¸°

```java
// âŒ ì‘ì€ ë°ì´í„°ì—ëŠ” ë¹„íš¨ìœ¨
List.of(1, 2, 3, 4, 5)
    .parallelStream()  // ì˜¤ë²„í—¤ë“œê°€ ë” í¼

// âœ… í° ë°ì´í„°ì— íš¨ê³¼ì 
IntStream.range(0, 1_000_000)
    .parallel()  // ì„±ëŠ¥ í–¥ìƒ!
```

**ì›ì¹™**:
- ë°ì´í„°ê°€ ì¶©ë¶„íˆ í´ ë•Œ (ìµœì†Œ ìˆ˜ì²œ ê°œ ì´ìƒ)
- CPU-bound ì‘ì—…ì¼ ë•Œ
- I/O ì‘ì—…ì—ëŠ” ë¶€ì í•©

### ğŸ¯ ì„±ëŠ¥ ì¸¡ì • Best Practices

```java
// System.nanoTime()ì„ í™œìš©í•œ ì •í™•í•œ ì„±ëŠ¥ ì¸¡ì •
long startTime = System.nanoTime();

// ì‘ì—… ìˆ˜í–‰

long endTime = System.nanoTime();
System.out.println("ì‹¤í–‰ ì‹œê°„: " + (endTime - startTime) + " ns");
```

- ì‘ì€ ë°ì´í„°ì™€ í° ë°ì´í„°ì—ì„œ ëª¨ë‘ í…ŒìŠ¤íŠ¸
- ì—¬ëŸ¬ ë²ˆ ì‹¤í–‰í•˜ì—¬ í‰ê· ê°’ ì¸¡ì •
- JVM ì›Œë°ì—… ê³ ë ¤

---

## ğŸ“ í•™ìŠµ í¬ì¸íŠ¸

### ì´ ë°œí‘œì—ì„œ ë°°ìš´ ê²ƒ

1. **forEachì™€ collectëŠ” ìš©ë„ê°€ ë‹¤ë¥´ë‹¤**
   - forEach: ë¶€ìˆ˜ íš¨ê³¼ ì‹¤í–‰
   - collect: ê²°ê³¼ ìˆ˜ì§‘

2. **ë³‘ë ¬ ì²˜ë¦¬ëŠ” í•­ìƒ ë¹ ë¥¸ ê²Œ ì•„ë‹ˆë‹¤**
   - ì‘ì€ ë°ì´í„°: ì˜¤ë²„í—¤ë“œ > ì´ì 
   - í° ë°ì´í„°: ì´ì  > ì˜¤ë²„í—¤ë“œ

3. **Thread-SafetyëŠ” ì¤‘ìš”í•˜ë‹¤**
   - ë³‘ë ¬ ì²˜ë¦¬ì—ì„œëŠ” ë°˜ë“œì‹œ ê³ ë ¤
   - collect()ê°€ ê°€ì¥ ì•ˆì „í•œ ë°©ë²•

4. **ì²´ì´ë‹ ìµœì í™”ëŠ” íš¨ê³¼ì ì´ë‹¤**
   - ì¤‘ê°„ ì—°ì‚° í†µí•©ìœ¼ë¡œ ì„±ëŠ¥ í–¥ìƒ
   - 15ë°° ì´ìƒì˜ ì„±ëŠ¥ ì°¨ì´ ê°€ëŠ¥

### ğŸ’¡ ì‹¤ë¬´ ì ìš© íŒ

1. **ê¸°ë³¸ì€ ìˆœì°¨ ìŠ¤íŠ¸ë¦¼**
   ```java
   list.stream()  // ê¸°ë³¸
   ```

2. **í•„ìš”í•  ë•Œë§Œ ë³‘ë ¬**
   ```java
   list.parallelStream()  // í° ë°ì´í„° + CPU-bound ì‘ì—…
   ```

3. **ê²°ê³¼ ìˆ˜ì§‘ì€ collect**
   ```java
   .collect(Collectors.toList())  // í•­ìƒ ì´ë ‡ê²Œ!
   ```

4. **ì²´ì´ë‹ ìµœì í™”**
   ```java
   .filter(ì¡°ê±´1 && ì¡°ê±´2 && ì¡°ê±´3)  // í†µí•©!
   ```

---

## ğŸ™ ê°ì‚¬í•©ë‹ˆë‹¤!


---

**ë°œí‘œì**: ê·œë³´
**ë‚ ì§œ**: 2026ë…„ 1ì›”
**ì£¼ì œ**: Java Stream API ì„±ëŠ¥ ê°œì„  ì‚¬ë¡€
